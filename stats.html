<!-- frontend/stats.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EstatÃ­sticas - Jogo da Velha ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="icon.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="menu">
    <h1>ğŸ“Š Minhas EstatÃ­sticas</h1>
    <div id="dados" style="margin-top: 20px;"></div>
    <button onclick="window.location.href='home.html'">ğŸ”™ Voltar ao Menu</button>
  </div>

  <script type="module">
    import { getToken } from './auth.js';

    const dados = document.getElementById("dados");

    async function carregarEstatisticas() {
      try {
        const res = await fetch("http://localhost:8080/api/users/me/stats", {
          headers: { Authorization: `Bearer ${getToken()}` }
        });

        if (!res.ok) throw new Error("Erro ao buscar estatÃ­sticas");

        const data = await res.json();

        dados.innerHTML = `
          <p><strong>UsuÃ¡rio:</strong> ${data.username}</p>
          <p><strong>VitÃ³rias:</strong> ${data.victories}</p>
          <p><strong>Derrotas:</strong> ${data.defeats}</p>
          <p><strong>Empates:</strong> ${data.draws}</p>
          <p><strong>PontuaÃ§Ã£o:</strong> ${data.score}</p>
        `;
      } catch (err) {
        dados.innerHTML = "<p>Erro ao carregar estatÃ­sticas.</p>";
        console.error(err);
      }
    }

    carregarEstatisticas();
  </script>
</body>
</html>
